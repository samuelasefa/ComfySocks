@model ComfySocks.Models.ProductStock.ProStockInformation
@{
                /**/

                ViewBag.Title = null;
}

<div class="row">
    <div class="col-md-10">
        @if (User.IsInRole("Super Admin") || User.IsInRole("Admin") || User.IsInRole("Store Manager"))
        {
            <a href="~/ProductStocks/NewProductEntry">New <span class="glyphicon glyphicon-plus"></span></a>
        }
        <a href="#" class="btn btn-add" onclick="Print()">Print <span class="glyphicon glyphicon-print"></span></a>
        <a href="~/ProductStocks/ProductStockList" class="btn btn-add">Back To List <span class="glyphicon glyphicon-circle-arrow-left"></span></a>

    </div>

    <div class="col-md-2">
        @if (User.IsInRole("Super Admin") || User.IsInRole("Admin") || User.IsInRole("Production"))
        {
            if (Model.Status == "Submmited")
            {
                <div class="row">
                    <div class="col-md-6">
                        <a href="~/ProductStocks/ProductApproved?id=@Model.ID">Accept <span class="glyphicon glyphicon-check"></span></a>
                    </div>
                    <div class="col-md-6" style="float:right">
                        <a href="~/ProductStocks/ProductRejected?id=@Model.ID">Reject <span class="glyphicon glyphicon-remove-circle"></span></a>
                    </div>
                </div>
            }

        }
    </div>
</div>
<div class="box box-info" id="printable">
    <div style="margin:40px">
        <div>
            <img src='~/Images/logo1.png' class="col-sm-12 " id="logo-img" style="margin-bottom:30px;margin-left:-10px;margin-right:0px;height:130px" />
        </div>
        <div class="row">
            <div class="col-md-8">
                <h3 style="align-content:center;text-decoration:underline">Product Reciving Voucher</h3>
            </div>
            <div class="col-md-4" style="float:right">
                Date: @Html.DisplayFor(modelItem => Model.Date)<br />
                No:@Html.DisplayFor(modelItem => Model.ID)
            </div>
        </div>

        <table class="table">
            <tr>
                <td>
                    From:
                </td>
            </tr>
            <tr>
                <td>
                    To:
                </td>
            </tr>
        </table>
        <table class="table well table-bordered">
            <thead>
                <tr>
                    <td>Item Description</td>
                    <td>Item Code</td>
                    <td>Unit</td>
                    <td>Quantity</td>
                </tr>
            </thead>
            @foreach (ComfySocks.Models.ProductStock.ProStock proStock in Model.ProStocks)
            {

                <tr>
                    <td>
                        @proStock.Item.Name @proStock.Item.ItemType.Name
                    </td>
                    <td>@proStock.Item.Code</td>
                    <td>@proStock.Item.Unit.Name</td>
                    <td>
                        @proStock.Quantity
                    </td>
                </tr>

            }
        </table>
        <div id="footer">
            <div class="row" style="margin-top:10%">
                <div class="col-md-4" style="float:left">
                    Prepared by : _________________
                </div>
                <div class="col-md-4">
                    Received by : @Model.ApplicationUser.UserName
                </div>
                <div class="col-md-4">
                    Approved by : _________________
                </div>
            </div>
            <br />
            <div class="col-sm-12 alert-danger" style="background-color:red;"></div>
        </div>

    </div>
</div>


<script>

    function Print() {
        var height = document.getElementById("printable").clientHeight;
        var pages = 1000 - (height % 950);
        document.getElementById("footer").style.marginTop = pages + "px";
        //document.getElementById("logo-img").style.width = 100 + "vw";
        print2()
    }
    function print2() {
        var utc = new Date().toJSON().slice(0, 10).replace(/-/g, '/');
        var headstr = "<html><head><style>.hiddenForPrint{visibility: hidden;printvisible:visible;}a:link:after, a:visited:after {display: none;content: '';}.divFooter {position: fixed;bottom: 0;}td{background-color:aquamarine}</style ><html></head><body>";

        var footstr = "</body><html>";

        var newstr = document.getElementById('printable').innerHTML;
        var oldstr = document.body.innerHTML;
        document.body.innerHTML = headstr + newstr + footstr;
        window.print();
        document.body.innerHTML = oldstr;
        document.getElementById("footer").style.marginTop = 0 + "px";
        return false;
    }
</script>
<script src="~/Scripts/sweetalert.js"></script>
<script src="~/Scripts/sweetalert.min.js"></script>
<link href="~/Scripts/sweetalert.css" rel="stylesheet" />


@if (ViewBag.errorMessage != null)
{
    <script>
                window.onload = function () {
                    sweetAlert("Opps...", "@ViewBag.errorMessage", "error");
                    return false;
                }
    </script>

}
@if (ViewBag.succsessMessage != null)
{
    <script>
                window.onload = function () {
                    sweetAlert("Congratulation", "@ViewBag.succsessMessage", "success");
                    return false;
                }
    </script>
}

@if (ViewBag.infoMessage != null)
{
    <script>
        window.onload = function () {
                sweetAlert("Success", "@ViewBag.infoMessage", "info");
                return false;
        }
    </script>
}
@if (ViewBag.RequiredItems != null)
{
    <script>
        window.onload = function () {
            sweetAlert("Shouldn't Be Empty!!", "Please Fill Supplier,Item and Store Information", "info");
            return false;
        }
    </script>
}

<script>
    function ItemSelected(id, Code) {
        document.getElementById("ItemID").value = id, Code;
    }

    //datatabale
    $("#maintable").DataTable({
        "info": false,
        "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]],
        "lengthChange": false,
    });
</script>

<style>
    .table-hover tbody tr:hover td, .table-hover tbody tr:hover th {
        background-color: #847BAA;
        color: #ecf0f1;
        cursor: pointer;
    }
</style>
